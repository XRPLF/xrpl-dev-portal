---
html: source-and-destination-tags.html
parent: transactions.html
blurb: 送信元タグと宛先タグを使用して、多目的アドレスからの、または多目的アドレスへの支払いを行います。
labels:
  - 支払い
  - アカウント
  - セキュリティ
---
# 送信元タグと宛先タグ

_送信元タグ_と_宛先タグ_は、XRP Ledgerの[支払い](../payment-types/index.md)機能で、多目的アドレスからの支払いや多目的アドレスへの支払いの特定の目的を示すことができます。送信元タグと宛先タグは、台帳上の直接的な機能を持ちません。送信元タグと宛先タグは、台帳外のシステムがどのように支払いを処理すべきかについての情報を提供するだけです。トランザクションでは、送信元タグも宛先タグも 32ビット符号なし整数の形式です。

宛先タグは、支払いの受取人または宛先を示します。例えば、[取引所](../../use-cases/defi/list-xrp-as-an-exchange.md) や [ステーブルコインの発行者](../../use-cases/tokenization/stablecoin-issuer.md)アドレスへの支払いは、宛先タグを使用して、そのビジネス自体のシステム内で支払額を与信するユーザを表すことができます。店舗・業者への支払いは、その支払いがどの商品を購入するのかを表すことができます。

送信元タグは、支払いの送信者または送信元を示します。最も一般的なのは、受取人に対する返金時の送信先として送信元タグを使用することです。返金する場合は、受領した支払いの送信元タグを返金支払いの宛先タグとして使用する必要があります。

顧客に、別のインターフェースを使用してXRP Ledgerアドレスからトランザクションを送受信する機能を提供することを、_ホストされたアカウント_の提供と呼びます。ホストされたアカウントでは通常、顧客ごとに送信元タグと宛先タグを使用します。

**ヒント:** [Xアドレス](https://xrpaddress.info/)は、従来のアドレスとタグを組み合わせて、両方をエンコードして1つのアドレスにしたものです。顧客に入金アドレスを示す場合、顧客にアドレスとタグの2つの情報を管理させるよりも、Xアドレスを使用する方が顧客にとって簡単かもしれません。(Xアドレスのタグは、送信時には送信元タグとして、受信時には宛先タグとして機能します)。

## 理由

他の分散型台帳では、顧客ごとに異なる入金アドレスを使用するのが一般的です。XRP Ledgerでは、支払いを受け取るためには、そのアドレスは入金され有効化済みの[アカウント](../accounts/accounts.md)でなければなりません。XRP Ledgerで他と同じアプローチを用いると、ネットワーク内の全てのサーバのリソースを無駄に消費し、各アドレスに対して[準備金](../accounts/reserves.md)の金額を無制限に確保しなければならな苦なり、大きなコストがかかります。

送信元タグと宛先タグは、入金と支払いを個別の顧客にマッピングする、より軽量な方法を提供します。

## ユースケース

ビジネスにおいては、複数の目的で送信元タグと宛先タグを使用する場合があります：

- 顧客アカウントへの直接マッピング
- 返金された支払いを、その支払いを行った支払元にマッピング
- 期限切れの見積もりへの支払いのマッピング
- 顧客が特定の入金に対して生成できる使い捨てタグの提供

プライバシーを保護しながらタグの重複を防ぐために、ビジネスでは利用可能なタグの全範囲を目的ごとに分割し、その範囲内でタグを予測不可能な順序で割り当てることができます。例えば、[SHA-256](https://ja.wikipedia.org/wiki/SHA-2)のような暗号ハッシュ関数を使用し、[剰余演算](https://ja.wikipedia.org/wiki/剰余演算)を使用して出力を関連するセクションのサイズにマッピングします。安全のため、新しいタグを使う前に古いタグとの衝突をチェックしてください。

タグを番号順に割り当てると、顧客のプライバシーが損なわれます。XRP Ledgerのトランザクションはすべて公開されているため、番号順でタグを割り当てると、タグとユーザのアドレスの対応を推測したり、使用されているタグに基づいてユーザのアカウントに関する情報を導き出したりすることが可能になります。


## タグの必須化

複数の顧客口座への支払いを受け取る可能性があるXRP Ledgerアドレスにとって、宛先タグなしで支払いを受け取ることは問題です。どの顧客に入金すべきかがすぐに分からないため、手作業が必要になったり、誰が受取人であったかを特定するために送金者とやり取りをしなければならなくなったりします。このようなケースを減らすために、[`RequireDest`設定を有効にする](../../tutorials/manage-account-settings/require-destination-tags.md)ことができます。そうすることで、もしユーザが支払先にタグを設定し忘れた場合、XRP Ledgerはその支払いを拒否します。その後、ユーザはそのタグを使って再度支払いを行うことができます。


## 関連項目

- [宛先タグの必須化](../../tutorials/manage-account-settings/require-destination-tags.md)
- [支払いのタイプ](../payment-types/index.md)

{% raw-partial file="/_snippets/common-links.md" /%}
